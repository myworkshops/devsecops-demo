---
# Secrets Configuration Template  
# Copy this file to secrets.local.yaml and fill in your actual values
# DO NOT commit secrets.local.yaml to version control

# Vault configuration
vault:
  replicas: 2

# MongoDB configuration per environment
mongodb:
  develop:
    password: "S3cr3tP4ss!"
    username: "app_user"
    database: "device_registration"
  stage:
    password: "S3cr3tP4ss!"
    username: "app_user"
    database: "device_registration"
  production:
    password: "S3cr3tP4ss!"
    username: "app_user"
    database: "device_registration"

# Jenkins configuration
jenkins:
  lock_log: false  # Set to true in production to hide sensitive logs
  admin_password: admin123
  git_repository: "https://github.com/myworkshops/devsecops-demo.git"
  git_library_branch: "feature/infrastructure"
  git_credentials_id: "wmoinar"
  github_token: "github_pat_XXXXX"  # Optional, for private repos
  dockerhub_username: "wmoinar"
  dockerhub_password: "dckr_pat_XXXXX"
  sonarcloud_token: "your-sonarcloud-token"

# Keycloak configuration
keycloak:
  admin_password: admin123
  postgresql_password: postgres123
  lock_log: true  # Set to true in production to hide sensitive logs
  # Single public client for frontend (used across all environments)
  clients:
    - client_id: "statistics-frontend"
      name: "Statistics Frontend Application"
      description: "Public client for statistics frontend application"
      public_client: true  # No client_secret required
      protocol: "openid-connect"
      standard_flow_enabled: true  # Authorization Code Flow
      direct_access_grants_enabled: false
      implicit_flow_enabled: false
      service_accounts_enabled: false
      # Web origins per environment (CORS)
      web_origins:
        develop:
          - "http://app.local"
          - "http://app-dev.local"
          - "http://app-develop.local"
          - "http://localhost:8080"
        stage:
          - "http://app-staging.local"
          - "http://app-stage.local"
          - "https://app-staging.example.com"
        production:
          - "https://app.example.com"
          - "https://www.example.com"
      # Redirect URIs per environment
      redirect_uris:
        develop:
          - "http://app.local/*"
          - "http://app-dev.local/*"
          - "http://app-develop.local/*"
          - "http://localhost:8080/*"
        stage:
          - "http://app-staging.local/*"
          - "http://app-stage.local/*"
          - "https://app-staging.example.com/*"
        production:
          - "https://app.example.com/*"
          - "https://www.example.com/*"
    - client_id: "statistics-api"
      name: "Statistics API"
      description: "Confidential client for statistics API backend"
      public_client: false  # Requires client_secret
      protocol: "openid-connect"
      standard_flow_enabled: true  # Authorization Code Flow
      direct_access_grants_enabled: true  # Resource Owner Password Flow
      implicit_flow_enabled: false
      service_accounts_enabled: true  # Client Credentials Flow
      environments: [develop, stage, production]
    - client_id: "device-registration-api"
      name: "Device Registration API"
      description: "Confidential client for device registration API backend"
      public_client: false  # Requires client_secret
      protocol: "openid-connect"
      standard_flow_enabled: true  # Authorization Code Flow
      direct_access_grants_enabled: true  # Resource Owner Password Flow
      implicit_flow_enabled: false
      service_accounts_enabled: true  # Client Credentials Flow
      environments: [develop, stage, production]
  realms:
    - name: develop
      display_name: "Development Environment"
      roles:
        - name: admin
          description: "Administrator role with full access"
        - name: operator
          description: "Operator role with read-only access"
      users:
        - username: admin-dev
          password: "dev-secret123"
          email: admin-dev@example.com
          firstName: Admin
          lastName: Dev
          enabled: true
          emailVerified: true
          roles: [admin]
        - username: operator-dev
          password: "dev-secret123"
          email: operator-dev@example.com
          firstName: Operator
          lastName: Dev
          enabled: true
          emailVerified: true
          roles: [operator]
    - name: stage
      display_name: "Staging Environment"
      roles:
        - name: admin
          description: "Administrator role with full access"
        - name: operator
          description: "Operator role with read-only access"
      users:
        - username: admin-staging
          password: "dev-secret123"
          email: admin-staging@example.com
          firstName: Admin
          lastName: Staging
          enabled: true
          emailVerified: true
          roles: [admin]
    - name: production
      display_name: "Production Environment"
      roles:
        - name: admin
          description: "Administrator role with full access"
        - name: operator
          description: "Operator role with read-only access"
      users:
        - username: admin-prod
          password: "dev-secret123"
          email: admin-prod@example.com
          firstName: Admin
          lastName: Prod
          enabled: true
          emailVerified: true
          roles: [admin]
